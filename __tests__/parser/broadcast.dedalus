test_passed <-
  ast_clause_location("./parser/broadcast.in.dedalus", _, ClauseId1),
  ast_clause(sbcast, ClauseId1, '@async'),
    ast_clause_var_arg(ClauseId1, 0, 'Member', none, true),
    ast_clause_var_arg(ClauseId1, 1, 'Sender', none, false),
    ast_clause_var_arg(ClauseId1, 2, 'Message', none, false),

    ast_body_rule_location("./parser/broadcast.in.dedalus", _, RuleId1),
    ast_body_rule(ClauseId1, RuleId1),
    ast_body_atom(RuleId1, smessage, false),
      ast_body_var_arg(RuleId1, 0, 'Agent', true),
      ast_body_var_arg(RuleId1, 1, 'Sender', false),
      ast_body_var_arg(RuleId1, 2, 'Message', false),
    ast_body_rule_location("./parser/broadcast.in.dedalus", _, RuleId2),
    ast_body_rule(ClauseId1, RuleId2),
    ast_body_atom(RuleId2, members, false),
      ast_body_var_arg(RuleId2, 0, 'Agent', true),
      ast_body_var_arg(RuleId2, 1, 'Member', false),

  ast_clause_location("./parser/broadcast.in.dedalus", _, ClauseId2),
  ast_clause(rdeliver, ClauseId2, '@next'),
    ast_clause_var_arg(ClauseId2, 0, 'Me', none, false),
    ast_clause_var_arg(ClauseId2, 1, 'Sender', none, false),
    ast_clause_var_arg(ClauseId2, 2, 'Message', none, false),

    ast_body_rule_location("./parser/broadcast.in.dedalus", _, RuleId3),
    ast_body_rule(ClauseId2, RuleId3),
    ast_body_atom(RuleId3, buf_bcast, false),
      ast_body_var_arg(RuleId3, 0, 'Sender', false),
      ast_body_var_arg(RuleId3, 1, 'Me', false),
      ast_body_var_arg(RuleId3, 2, 'Message', false);

