% checking how severl choose() conditions work together 

book(heinlein, stranger_in_a_strange_land, 1961)@1;
book(heinlein, job_a_comedy_of_justice, 1984)@1;
book(harrison, deathworld, 1960)@1;
book(harrison, the_stainless_steel_rat, 1961)@1;
book(strugatsky, the_way_to_amalthea, 1960)@1;

author(heinlein, usa)@1;
author(harrison, usa)@1;
author(strugatsky, ussr)@1;

select_author(Citizenship, Year, Author) <-
  book(Author, Title, Year),
  author(Author, Citizenship),
  choose((Year), (Author)),
  choose((Citizenship), (Author));



test_passed(Author) <-
  author(Author, usa),
  select_author(_, 1961, Author);

test_failed <-
  % cannot be true at the same time,
  % since we selecting by year and citizenship
  % row with [usa, 1960] must be unique
  select_author(usa, 1961, heinlein),
  select_author(usa, 1961, harrison);
